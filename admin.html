<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</title>
<style>
body{font-family:"Cairo",sans-serif;background:#f0f0f0;padding:30px;}
h2{color:#0072ff;}
input,button{padding:10px;margin:5px;border-radius:10px;border:1px solid #ccc;}
button{border:none;background:#0072ff;color:#fff;font-weight:bold;cursor:pointer;}
button:hover{background:#005bb5;}
table{width:100%;border-collapse:collapse;margin-top:20px;}
th,td{border:1px solid #ccc;padding:10px;text-align:center;}
th{background:#0072ff;color:#fff;}
</style>
</head>
<body>

<h2>ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† - ØªØ¹Ø¯ÙŠÙ„ Ø£Ø±ØµØ¯Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h2>

<div>
<input type="email" id="userEmail" placeholder="Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…">
<input type="number" id="amount" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº">
<button onclick="addBalance()">â• Ø¥Ø¶Ø§ÙØ© Ø±ØµÙŠØ¯</button>
<button onclick="removeBalance()">â– Ø®ØµÙ… Ø±ØµÙŠØ¯</button>
<button onclick="logout()">Ø®Ø±ÙˆØ¬</button>
<p id="msg" style="color:red;font-size:14px;"></p>
</div>

<h3>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</h3>
<table id="usersTable">
<tr><th>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø±ØµÙŠØ¯</th></tr>
</table>

<script>
// Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†
if(localStorage.getItem("isAdmin")!=="true"){
  window.location.href="admin-login.html";
}

const accounts = JSON.parse(localStorage.getItem("accounts")) || [];

const table = document.getElementById("usersTable");
function renderTable(){
  table.innerHTML = "<tr><th>Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„</th><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ø±ØµÙŠØ¯</th></tr>";
  accounts.forEach(u=>{
    table.innerHTML += `<tr>
      <td>${u.email}</td>
      <td>${u.name}</td>
      <td>${u.balance || 0}</td>
    </tr>`;
  });
}
renderTable();

function addBalance(){
  const email = document.getElementById("userEmail").value;
  const amount = Number(document.getElementById("amount").value);
  const msg = document.getElementById("msg");

  const user = accounts.find(u=>u.email===email);
  if(!user){ msg.innerText="âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"; return; }
  user.balance = (user.balance || 0) + amount;
  localStorage.setItem("accounts",JSON.stringify(accounts));
  renderTable();
  msg.style.color="green";
  msg.innerText="âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø±ØµÙŠØ¯";
}

function removeBalance(){
  const email = document.getElementById("userEmail").value;
  const amount = Number(document.getElementById("amount").value);
  const msg = document.getElementById("msg");

  const user = accounts.find(u=>u.email===email);
  if(!user){ msg.innerText="âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯"; return; }
  if((user.balance||0) < amount){ msg.innerText="âŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø®ØµÙ… Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¨Ù„Øº"; return; }
  user.balance -= amount;
  localStorage.setItem("accounts",JSON.stringify(accounts));
  renderTable();
  msg.style.color="green";
  msg.innerText="âœ… ØªÙ… Ø®ØµÙ… Ø§Ù„Ø±ØµÙŠØ¯";
}

function logout(){
  localStorage.removeItem("isAdmin");
  window.location.href="admin-login.html";
}
</script>

</body>
</html>
